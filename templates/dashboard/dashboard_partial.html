{% load static %}

{% for dispositivo in dispositivos %}
<div class="bg-gray-200 dark:bg-gray-800 rounded-2xl shadow border-black-900 p-8 
            transition hover:shadow-lg transform hover:scale-105 duration-200
            {% if dispositivo.ultimo_nivel >= 75 %}animate-pulse border-red-600{% endif %}"
     data-device-id="{{ dispositivo.id }}">
  
  <h2 class="text-xl font-bold {% if dispositivo.ultimo_nivel >= 75 %}text-red-600{% else %}text-gray-800 dark:text-gray-100{% endif %} mb-2">
    Contenedor: {{ dispositivo.device_name }}
  </h2>

  <p class="text-gray-600 dark:text-gray-300">
    Nivel: <span class="font-semibold {% if dispositivo.ultimo_nivel >= 75 %}text-red-900{% endif %}">
      {{ dispositivo.ultimo_nivel }}%
    </span>
  </p>

  <p class="text-gray-600 dark:text-gray-300">
    Última actualización: {{ dispositivo.ultima_fecha|date:"d M Y, h:i a" }}
  </p>

  <a href="{% url 'detalle_contenedor' dispositivo.id %}" 
     class="mt-4 inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
     Ver más
  </a>
</div>
{% empty %}
<p class="text-gray-600 dark:text-gray-300">No hay dispositivos registrados.</p>
{% endfor %}
